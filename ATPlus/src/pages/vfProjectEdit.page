<apex:page standardController="Project__c"  extensions="ClsUserProfileFinder,ClsProjectExtensionController" sidebar="false" tabStyle="Project_Design__tab" >

    <apex:includeScript value="{!$Resource.JQuery172_js}"/>
    <script type="text/javascript">
    $(document).ready(function() {
    
        var orgUnitCodeId;    
        var OrgUnitLookupId;
        
         OrgUnitCodeId = $("label:contains('Organization Id')").attr('for');    
         OrgUnitLookupId = jq($("label:contains('Organization Id')").attr('for') + "_lkwgt");
         
        var left = (screen.width/2)-(400/2);
        var top = (screen.height/2)-(500/2);
        var NWin;    
        
        
        $(OrgUnitLookupId).click(function(){
            //if ("{!$Profile.Name}" == "Mission Partner"){
            if ("{!IsPartnerUser}"){
                $(OrgUnitLookupId).prop("href", "/Partners/vfObjectLookup?objectName=OrgUnit&txt="+OrgUnitCodeId +"&frm=" + escapeUTF("{!$Component.myForm}"));                
            } else {
                $(OrgUnitLookupId).prop("href", "/apex/vfObjectLookup?objectName=OrgUnit&txt="+OrgUnitCodeId +"&frm=" + escapeUTF("{!$Component.myForm}"));                
            }    
            //NWin = window.open($(this).prop('href'), '', 'toolbar=no, location=no, directories=no, status=no, menubar=no, scrollbars=no, resizable=no, copyhistory=no, height=500, width=600, top='+top+', left='+left );
            NWin = window.open($(this).prop('href'), '', 'toolbar=no, fullscreen=yes, location=no, directories=no, status=no, menubar=no, scrollbars=no, resizable=yes, copyhistory=no' );          
            if (window.focus){
               NWin.focus();
            }
          
            return false;
        });   
        
      var OfficeId;    
        var OfficeLookupId;
        
         OfficeId = $("label:contains('Office')").attr('for');    
         OfficeLookupId = jq($("label:contains('Office')").attr('for') + "_lkwgt");

         
        var left = (screen.width/2)-(400/2);
        var top = (screen.height/2)-(500/2);
        var NWin;    
        
        
        $(OfficeLookupId).click(function(){
            //if ("{!$Profile.Name}" == "Mission Partner"){
            if ("{!IsPartnerUser}"){
                $(OfficeLookupId).prop("href", "/Partners/vfObjectLookup?objectName=Office&orgCode={!Project__c.ouId__c}&&txt="+OfficeId +"&frm=" + escapeUTF("{!$Component.myForm}"));                
            } else {
                $(OfficeLookupId).prop("href", "/apex/vfObjectLookup?objectName=Office&orgCode="+$(jq(OrgUnitCodeId+'_lkid')).val() +"&txt="+OfficeId +"&frm=" + escapeUTF("{!$Component.myForm}"));                
            }    
            //NWin = window.open($(this).prop('href'), '', 'toolbar=no, location=no, directories=no, status=no, menubar=no, scrollbars=no, resizable=no, copyhistory=no, height=500, width=600, top='+top+', left='+left );
            NWin = window.open($(this).prop('href'), '', 'toolbar=no, fullscreen=yes, location=no, directories=no, status=no, menubar=no, scrollbars=no, resizable=yes, copyhistory=no' );          
            if (window.focus){
               NWin.focus();
            }
          
            return false;
        });   
        
        
    });
    
    function jq( myid ) {  
      var returnVar = "#" + myid.replace( /:/g, "\\:" );  
      return returnVar; 
    }
    
    </script>
    <apex:sectionHeader title="Project Edit" subtitle="{!Project__c.name}"/>
   
    <apex:messages globalOnly="true"  style="text-align:center;color:Red; overflow:auto; font-family:Helvetica, sans-serif; font-size:9pt; font-weight:bold;"/>
    
    
    <apex:form >
    <apex:pageBlock title="Project Edit" mode="edit">
        <apex:pageBlockButtons >
            <apex:commandButton action="{!save}" value="Save"/>
            <apex:commandButton action="{!cancel}" value="Cancel"/>            
        </apex:pageBlockButtons>
        <apex:pageBlockSection showHeader="true" title="Basic Information" columns="2">        
             <apex:facet name="header">        
                <span class="pbSubExtra"><span class="requiredLegend">
                <span class="requiredExampleOuter">
                <span class="requiredExample">&nbsp;</span></span>
                <span class="requiredText"> = Required Information</span>
                 </span></span>
                <!--**ADIC-159** 
                <h3>Basic Information</h3> -->
                <h3>Overview</h3>
                
      </apex:facet>
      
      
            <apex:pageBlockSectionItem helpText="{!$ObjectType.Project__c.fields.LFName__c.inlineHelpText}">
            <apex:pageBlockSectionItem >                  
                 <apex:outputLabel value="Project Name" for="pName"/>
             </apex:pageBlockSectionItem>    
            <apex:inputField id="pName" required="true" value="{!Project__c.Public_Name__c}" />     
           </apex:pageBlockSectionItem>  
           
           
            <apex:inputField required="true" value="{!Project__c.ouId__c}"/>
            <apex:pageBlockSectionItem helpText="{!$ObjectType.Project__c.fields.Project_Manager__c.inlineHelpText}">
            <apex:pageBlockSectionItem >                  
                 <apex:outputLabel value="Project Manager" for="pManager"/>
             </apex:pageBlockSectionItem>    
            <apex:inputField id="pManager" value="{!Project__c.Project_Manager__c}" />     
           </apex:pageBlockSectionItem>  
            
           
            
           

          <apex:pageBlockSectionItem helpText="{!$ObjectType.Project__c.fields.Start_Date__c.inlineHelpText}" >
          
            <apex:pageBlockSectionItem >                 
                 <apex:outputLabel value="Start Date" for="startDate"/>
             </apex:pageBlockSectionItem>  
              <apex:outputPanel id="ajaxrequest"> 
                 <apex:pageBlockSectionItem >                            
                      <apex:inputField required="{!isPropsedSelected}" value="{!Project__c.Start_Date__c}" id="startDate"/>
                 </apex:pageBlockSectionItem> 
                 
                </apex:outputPanel>    
           </apex:pageBlockSectionItem>

  <apex:pageBlockSectionItem > 
            </apex:pageBlockSectionItem>     

            
          <apex:pageBlockSectionItem helpText="{!$ObjectType.Project__c.fields.End_Date__c.inlineHelpText}">
            <apex:pageBlockSectionItem >                 
                 <apex:outputLabel value="End Date" for="endDate"/>
             </apex:pageBlockSectionItem>  
              
            <apex:outputPanel id="ajaxrequest1"> 
                 <apex:pageBlockSectionItem >                            
                      <apex:inputField required="{!isPropsedSelected}" value="{!Project__c.End_Date__c}" id="endDate"/>
                 </apex:pageBlockSectionItem> 
                
            </apex:outputPanel>    
           </apex:pageBlockSectionItem>          
           
              <apex:pageBlockSectionItem > 
            </apex:pageBlockSectionItem>
           
            <apex:PageBlockSectionItem > 
                <apex:outputLabel value="Project Status" for="sts"/>
                <apex:actionRegion >
                 <apex:inputField value="{!Project__c.Status__c}" id="sts">
                <apex:actionSupport event="onchange"  action="{!isStatusChanges}" reRender="ajaxrequest,ajaxrequest1" />  
           
                </apex:inputField>        
                </apex:actionRegion>
             </apex:PageBlockSectionItem>
        </apex:pageBlockSection>
        <apex:pageBlockSection showHeader="true" title="Detailed Information" columns="1">
      
           <apex:pageBlockSectionItem helpText="{!$ObjectType.Project__c.fields.Project_Description__c.inlineHelpText}">
            <apex:pageBlockSectionItem >                 
                 <apex:outputLabel value="Project Description" for="pDesc"/>
             </apex:pageBlockSectionItem>    
            <apex:inputField id="pDesc" value="{!Project__c.Project_Description__c}" />     
           </apex:pageBlockSectionItem>  
            
           
              
       
            
          
  
  <!-- ******************* System Information to be displayed only to SysAdmins******************* -->      
        </apex:pageBlockSection>
       <!-- <apex:pageBlockSection showHeader="true" title="System Information" columns="2" rendered="{!$Profile.Name =='System Administrator(c)'}"> -->
          <apex:pageBlockSection showHeader="true" title="System Information" columns="2" rendered="{!IsADMINUser}">
            <apex:pageBlockSectionItem >
                <apex:outputLabel value="Project Owner"/>
                <apex:outputText value="{!Project__c.Owner.Name}"/>
            </apex:pageBlockSectionItem>
            
            <apex:pageBlockSectionItem >
                <apex:outputLabel value="Last Modifed By"/>
                <apex:outputText value="{!Project__c.LastModifiedBy.Name}"/>
            </apex:pageBlockSectionItem>
            
        </apex:pageBlockSection>
        <apex:pageBlockSection showHeader="false" columns="2">
        </apex:pageBlockSection>
    </apex:pageBlock>
    </apex:form>
</apex:page>